# feedback response: v2 blockers

## checklist

- [ ] blocker.1: rename `claudeCodeAdapter` â†’ `genBrainHooksAdapterForClaudeCode`, `opencodeAdapter` â†’ `genBrainHooksAdapterForOpencode`
- [ ] blocker.2: extract `applyHooksForLinkedRoles` to its own domain.operation file
- [ ] blocker.3: update log message `'ðŸ”— Discover linked roles with hooks...'` â†’ `'ðŸ”­ search for linked role with hooks...'`
- [ ] blocker.4: rename `cleanupOrphanedRoleHooks` â†’ `pruneOrphanedRoleHooks`
- [ ] blocker.5: update `applyRoleHooksToDetectedBrains` return type: `added/updated/removed` â†’ `hooks: { created/updated/deleted/unchanged }`
- [ ] blocker.6: add integration tests for `cleanupOrphanedRoleHooks` (now `pruneOrphanedRoleHooks`)
- [ ] blocker.7: push `'anthropic/claude-code'` not `'claude-code'` in detectBrainReplsInRepo
- [ ] blocker.8: push `'opencode-ai/opencode'` not `'opencode'` in detectBrainReplsInRepo
- [ ] blocker.9: rename files:
  - `applyRoleHooksToDetectedBrains.ts` â†’ `syncAllRoleHooksIntoEachBrainRepl.ts`
  - `syncRoleHooksIntoBrainRepl.ts` â†’ `syncOneRoleHooksIntoOneBrainRepl.ts`
  - `applyHooksForLinkedRoles.ts` â†’ `syncHooksForLinkedRoles.ts`

---

## execution

### blocker.1: adapter renames
- [x] already done in previous session

### blocker.2: extract applyHooksForLinkedRoles
- [x] already done in previous session

### blocker.3: log message update
- [ ] find and update the log message

### blocker.4: cleanupOrphanedRoleHooks â†’ pruneOrphanedRoleHooks
- [ ] rename file
- [ ] rename function
- [ ] update all imports

### blocker.5: return type refactor
- [ ] update return type structure
- [ ] update all callers
- [ ] update tests

### blocker.6: integration tests for prune function
- [ ] create integration test file

### blocker.7: brain specifier update for claude-code
- [ ] update detectBrainReplsInRepo to push 'anthropic/claude-code'
- [ ] update getBrainHooks to match on 'anthropic/claude-code'
- [ ] update all tests

### blocker.8: brain specifier update for opencode
- [ ] update detectBrainReplsInRepo to push 'opencode-ai/opencode'
- [ ] update getBrainHooks to match on 'opencode-ai/opencode'
- [ ] update all tests

### blocker.9: file renames
- [ ] rename applyRoleHooksToDetectedBrains.ts â†’ syncAllRoleHooksIntoEachBrainRepl.ts
- [ ] rename syncRoleHooksIntoBrainRepl.ts â†’ syncOneRoleHooksIntoOneBrainRepl.ts
- [ ] rename applyHooksForLinkedRoles.ts â†’ syncHooksForLinkedRoles.ts
- [ ] update all imports

---

## checkoffs

(to be filled as each blocker is resolved)
