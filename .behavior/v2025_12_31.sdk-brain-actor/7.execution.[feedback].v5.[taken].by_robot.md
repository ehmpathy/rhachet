# response to feedback v5

## response checklist

- [ ] blocker.1: genActor needs Role.typed for strong typing + @ts-expect-error tests
- [ ] blocker.2: RoleSkillActable -> ActorRoleSkill as DomainEntity, findSkillBySlug -> findActorRoleSkillBySlug
- [ ] blocker.3: onInvokeActInput should be strongly typed from skill schema
- [ ] blocker.4: skill should be pre-resolved and passed INTO actorRun/actorAct
- [ ] blocker.5: findBrainInAllowlist -> findActorBrainInAllowlist
- [ ] blocker.6: Add todo for --interactive mode in actorAsk

---

## blocker.1: genActor needs Role.typed for strong typing

**issue**: `genActor` should return an Actor with strongly typed `.act()` and `.run()` methods. requires `Role.typed()` for literal skill names to flow through

**analysis**: current implementation already uses `<TRole extends Role>` generic and returns `Actor<TRole>`. the issue is that tests use `new Role()` instead of `Role.typed()`, which widens skill names

**fix**:
1. update genActor.test.ts to use `Role.typed()` for test role creation
2. add @ts-expect-error type assertions for positive and negative cases
3. verify types flow through from role → genActor → actor.act/run

---

## blocker.2: RoleSkillActable -> ActorRoleSkill

**issue**: `RoleSkillActable` is a Domain.Object and should be treated as such. rename to `ActorRoleSkill` to clarify its purpose for actors

**fix**:
1. rename `RoleSkillActable` interface to `ActorRoleSkill`
2. make it extend `DomainLiteral` or define as a proper domain object
3. rename `findSkillBySlug` to `findActorRoleSkillBySlug`
4. update all imports and references

---

## blocker.3: onInvokeActInput should be strongly typed

**issue**: `onInvokeActInput` uses `Record<string, unknown>` instead of typed skill input

**analysis**: this is a hook for CLI invocation, where skill types aren't known at compile time. the hook operates at runtime with parsed CLI args. strong typing here requires generic constraints on the InvokeHooks interface tied to a Role type

**fix**:
1. make InvokeHooks generic over TRole
2. type onInvokeActInput based on TRole's rigid skills

---

## blocker.4: skill pre-resolution

**issue**: actorRun and actorAct look up skills internally. the caller should resolve the skill and pass it in

**fix**:
1. require `ActorRoleSkill` to have an executable (not optional)
2. move skill resolution to genActor's bound methods
3. pass resolved skill into actorRun/actorAct
4. simplify actorRun/actorAct to just execute

---

## blocker.5: findBrainInAllowlist -> findActorBrainInAllowlist

**issue**: namespace things for their purpose via treestruct pattern

**fix**: rename file and function from `findBrainInAllowlist` to `findActorBrainInAllowlist`

---

## blocker.6: add interactive mode todo

**issue**: actorAsk should support --interactive mode for CLI invocations

**fix**: add todo comment in actorAsk.ts

---

## execution plan

1. blocker.6: add todo comment (quick win)
2. blocker.5: rename findBrainInAllowlist (simple rename)
3. blocker.2: rename RoleSkillActable -> ActorRoleSkill as DomainEntity
4. blocker.4: refactor skill pre-resolution
5. blocker.1: update genActor.test.ts with Role.typed() and @ts-expect-error
6. blocker.3: make onInvokeActInput strongly typed
7. run tests to verify

---

## checkoffs

