# domain distillation: rhachet purpose sophy

declastruct domain objects and operations to enable fulfillment of the wish.

note: this is a content/documentation project. the domain is conceptual (briefs, claims, references) rather than database-backed entities. the "persistence layer" is the filesystem.

---

# domain.objects

## Brief

a curated knowledge artifact that explains a concept or thesis.

```ts
interface Brief {
  // primary key (filesystem path serves as id)
  path: string;                    // e.g., ".agent/repo=.this/role=ecologist/briefs/postlabor/extractors-vs-distributors.md"

  // unique key
  slug: string;                    // e.g., "extractors-vs-distributors"
  topic: string;                   // e.g., "postlabor"

  // content
  title: string;                   // e.g., "extractors vs distributors"
  summary: string;                 // 1-3 sentence overview
  body: string;                    // markdown content
  claims: Claim[];                 // sourced assertions within the brief
  frame: Frame;                    // narrative perspective

  // metadata
  createdAt: string;
  updatedAt: string;
}
```

**briefs to produce:**

| slug | topic | purpose |
|------|-------|---------|
| `dual-ratchet-metaphor` | `philosophy` | explain the two levels rhachet operates at |
| `extractors-vs-distributors` | `postlabor` | explain the two philosophies in competition |
| `critical-junctures` | `postlabor` | explain postlabor as a critical juncture |
| `iron-law-of-oligarchy` | `postlabor` | explain default trend toward extraction |
| `three-ratchet-mechanisms` | `postlabor` | brains, brawns, morals ratchets |
| `knowledge-ratchet-rhachet` | `postlabor` | how rhachet unlocks brain-build distribution |
| `why-nations-fail-distilled` | `references` | key insights from acemoglu & robinson |
| `optimistic-frame` | `philosophy` | hope and inevitability of abundance |

---

## Claim

a sourced assertion that can be traced to a reference.

```ts
interface Claim {
  // unique within brief
  id: string;                      // e.g., "claim-1"

  // content
  statement: string;               // the assertion itself
  citations: Citation[];           // sources that support this claim
  commentary: string | null;       // interpretation (clearly separated from source)

  // classification
  type: 'thesis' | 'evidence' | 'synthesis';
}
```

**example claims:**

| type | statement | source |
|------|-----------|--------|
| thesis | extractive institutions extract resources from the many by the few | ref.1 [4] |
| thesis | all complex organizations tend toward oligarchy | ref.2 [23] |
| evidence | the black death transformed european feudal structures | ref.1 [13] |
| synthesis | postlabor is a critical juncture where extractors and distributors compete | postlabor refs + ref.1 |

---

## Reference

an academic or cultural source that grounds claims.

```ts
interface Reference {
  // primary key
  id: string;                      // e.g., "ref.1"

  // bibliographic
  title: string;
  authors: string[];
  year: number;
  publication: string | null;

  // content
  citations: Citation[];           // numbered quotes

  // relevance
  relevance: string;               // how it relates to rhachet philosophy
}
```

**references established:**

| id | title | relevance |
|----|-------|-----------|
| ref.1 | Why Nations Fail | extractors vs distributors frame, critical junctures |
| ref.2 | Iron Law of Oligarchy | default trend toward extraction |
| ref.3 | Technofeudalism | extractor-dominated AI future |
| ref.4 | Ratchet Effect | irreversibility of distribution |
| ref.5 | Post-Scarcity Economics | distributor end state |
| ref.6 | Solarpunk Movement | optimistic frame for abundance |
| ref.7 | Open Source AI | brains ratchet mechanism |
| ref.8 | Von Neumann Self-Replicate Machines | brawns ratchet mechanism |

---

## Citation

a numbered quote from a reference.

```ts
interface Citation {
  // unique within reference
  number: number;                  // e.g., 1, 2, 3...

  // content
  quote: string;                   // the exact text
  context: string | null;          // where in the source this appears

  // parent
  referenceId: string;             // e.g., "ref.1"
}
```

---

## Concept

a defined term in the domain vocabulary.

```ts
interface Concept {
  // unique key
  term: string;                    // e.g., "extractor"

  // definition
  definition: string;              // what it means
  synonyms: string[];              // related terms from sources
  antonyms: string[];              // opposite terms

  // provenance
  origin: string;                  // where the term comes from
  citations: Citation[];           // definitional sources
}
```

**core concepts:**

| term | definition | origin |
|------|------------|--------|
| extractor | entity that captures resources from the many for the few | Why Nations Fail (extractive institutions) |
| distributor | entity that distributes power and resources widely | Why Nations Fail (inclusive institutions) |
| critical juncture | historical event that transforms societies | Why Nations Fail |
| ratchet | mechanism that allows progress in one direction only | mechanical metaphor |
| brains ratchet | once brain software is open, monopoly dies | postlabor refs |
| brawns ratchet | self-replicant swarms create autarky | postlabor refs |
| morals ratchet | decoupled survival cannot be reversed | postlabor refs |
| postlabor | economic state where human labor is not required for survival | synthesis |
| brain.atom | atomic unit of inference (single api call) | rhachet |
| brain.repl | multi-turn reason loop with tool use | rhachet |
| enrollment | pair a brain with a role to produce an actor | rhachet |

---

## Frame

a narrative perspective that shapes how content is presented.

```ts
interface Frame {
  // unique key
  name: string;                    // e.g., "optimistic"

  // characteristics
  tone: string;                    // e.g., "hopeful, empowered, assured"
  emphasis: string;                // what to highlight
  avoidance: string;               // what to minimize

  // application
  phrases: string[];               // preferred language
  antiPhrases: string[];           // language to avoid
}
```

**frames:**

| name | tone | emphasis |
|------|------|----------|
| optimistic | hopeful, assured | inevitability of good outcome, solidarity |
| ensure-not-fight | proactive, constructive | guarantee the positive, not combat negative |
| pragmatic | grounded, logical | arguments over appeals, citations over claims |

---

# domain.operations

## brief operations

### getBrief

retrieve a brief by topic and slug.

```ts
getBrief(input: {
  by: { topic: string; slug: string } | { path: string }
}): Brief | null
```

**implementation**: read markdown file from filesystem, parse frontmatter + body.

### setBrief

create or update a brief.

```ts
setBrief(input: {
  upsert: Brief
}): Brief
```

**implementation**: write markdown file to filesystem with frontmatter + body.

---

## claim operations

### getClaims

retrieve claims for a topic.

```ts
getClaims(input: {
  by: { topic: string } | { briefSlug: string }
}): Claim[]
```

**implementation**: parse claims from brief body sections.

### setClaim

add a claim to a brief.

```ts
setClaim(input: {
  briefPath: string;
  claim: Claim;
}): Claim
```

**implementation**: append claim section to brief body.

---

## reference operations

### getReference

retrieve a reference by id.

```ts
getReference(input: {
  by: { id: string }
}): Reference | null
```

**implementation**: read from research references file.

### getCitation

retrieve a specific citation.

```ts
getCitation(input: {
  referenceId: string;
  citationNumber: number;
}): Citation | null
```

**implementation**: parse citation from reference in research file.

---

## concept operations

### getConcept

retrieve a concept definition.

```ts
getConcept(input: {
  by: { term: string }
}): Concept | null
```

**implementation**: scan briefs for concept definitions.

---

## readme operations

### getReadmeSection

retrieve a section from readme.

```ts
getReadmeSection(input: {
  by: { sectionTitle: string }
}): { content: string; startLine: number; endLine: number } | null
```

**implementation**: parse readme.md, find section by title.

### setReadmeSection

update a section in readme.

```ts
setReadmeSection(input: {
  sectionTitle: string;
  content: string;
}): void
```

**implementation**: find section, replace content, preserve structure.

---

# composition: how operations fulfill the wish

## deliverable.1: postlabor briefs

```
for each brief in briefs_to_produce:
  1. getClaims({ by: { topic: brief.topic } }) from research
  2. getReference({ by: { id } }) for each claim source
  3. getCitation({ referenceId, citationNumber }) for quotes
  4. setBrief({
       upsert: {
         path: `.agent/repo=.this/role=ecologist/briefs/postlabor/${brief.slug}.md`,
         ...briefContent,
         claims: claimsWithCitations,
         frame: getFrame('optimistic')
       }
     })
```

## deliverable.2: readme update

```
1. getReadmeSection({ by: { sectionTitle: 'solarpunk future of abundance' } })
2. compose compact update that:
   - ties ratchet metaphor to vision
   - links to briefs for depth
   - stays scannable
3. setReadmeSection({
     sectionTitle: 'solarpunk future of abundance',
     content: compactUpdate
   })
```

---

# filesystem map

| domain object | persistence location |
|---------------|---------------------|
| Brief | `.agent/repo=.this/role=ecologist/briefs/postlabor/*.md` |
| Reference | `.behavior/v2026_01_18.rhachet-purpose-sophy/3.1.research.references._.v1.i1.md` |
| Citation | embedded in Reference file |
| Concept | embedded in Brief files |
| Frame | implicit in Brief content |
| Readme Section | `readme.md` |

---

# validation: criteria coverage

| usecase | enabled by |
|---------|------------|
| 1. understand dual ratchet | `setBrief(dual-ratchet-metaphor)` + `setReadmeSection` |
| 2. why distribution matters | `setBrief(extractors-vs-distributors)` + `setBrief(critical-junctures)` + `setBrief(iron-law-of-oligarchy)` |
| 3. three ratchet mechanisms | `setBrief(three-ratchet-mechanisms)` |
| 4. rhachet enables brains ratchet | `setBrief(knowledge-ratchet-rhachet)` |
| 5. distilled insights | `setBrief(why-nations-fail-distilled)` + claims with citations |
| 6. optimistic frame | Frame applied to all briefs |
| 7. readme update scope | `setReadmeSection` with links to briefs |
