# domain term analysis: keyrack

> why "keyrack" aligns with the vision's keycard metaphor

---

## the vision's core metaphor

from `1.vision.md`:

> "credentials go in. only keycards come out. ğŸ”"

> "the keyrack isn't a credential loader â€” it's a firewall. it reads raw credentials from your vault, resolves them into the shortest-lived form possible via mechanism adapters, and refuses to pass through what it can't trust."

the vision frames the system as a **hotel front desk**:
- raw credentials are stored securely (in vaults)
- the firewall resolves them into keycards (short-lived grants)
- agents receive keycards, never raw credentials

---

## keyrack: the hotel front desk

a **keyrack** is the board at a hotel front desk where room keycards hang in numbered slots:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘  ğŸ”‘  ğŸ”‘  ğŸ”‘  ğŸ”‘  ğŸ”‘  ğŸ”‘  ğŸ”‘  â”‚  â† keyrack
â”‚  101 102 103 104 105 106 107 108â”‚     (slots for keycards)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**hotel terminology** [1]:
- "a key rack is positioned underneath the counter of the front desk and contains an array of slots used to keep the keys of the guestrooms"
- "key racks are often placed in front desk drawers to ensure the safety and security of guests"

---

## metaphor alignment

| vision concept | keyrack metaphor |
|----------------|------------------|
| raw credentials | master keys in the vault (never handed out) |
| vaults | secure storage behind the front desk |
| mechanism adapters | front desk staff who mint keycards |
| grants (short-lived) | keycards with expiration |
| agents | guests who receive keycards |
| firewall | front desk policy (verify, resolve, refuse contraband) |

**the flow**:
```
guest arrives (agent needs credentials)
       â†“
front desk checks vault (resolve from storage backend)
       â†“
mints keycard (mechanism adapter â†’ short-lived grant)
       â†“
hangs on keyrack (ready for pickup)
       â†“
guest takes keycard (agent receives grant)
       â†“
raw credentials never leave the vault
```

---

## comparison: keyrack vs keyring

| aspect | keyrack | keyring |
|--------|---------|---------|
| metaphor | hotel front desk | physical key holder |
| output type | keycards in slots | keys on a ring |
| organization | structured, indexed | bundled, jangled |
| access pattern | grab from a slot | pull off the ring |
| vision alignment | âœ… completes keycard metaphor | different metaphor |
| blue collar roots | hotel staff, hospitality | janitor, trades |
| trademark | âœ… clear | âœ… clear |
| linux precedent | none | GNOME Keyring |

---

## cli examples

```sh
# get keycards for this repo
rhx keyrack get --for repo

# set up a new keycard slot
rhx keyrack set --key XAI_API_KEY

# unlock a vault to access a keycard
rhx keyrack unlock --key AWS_SSO_PREP

# check status of all keycards
rhx keyrack status
```

**the language feels natural**:
- "grab a keycard from the rack"
- "hang a new keycard on the rack"
- "the keycard slot is locked"

---

## the complete metaphor chain

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      keyrack                            â”‚
â”‚                   (the system)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   vaults              mechanism            keycards     â”‚
â”‚   (storage)    â†’      adapters      â†’      (grants)     â”‚
â”‚                       (resolve)                         â”‚
â”‚   os.direct           REPLICA            api key      â”‚
â”‚   os.secure           GITHUB_APP           ghs_... 1h   â”‚
â”‚   1password           AWS_SSO              session 8h   â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   raw credentials never leave the vault                 â”‚
â”‚   only keycards are handed to agents                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## why keyrack over keyring

1. **vision alignment** â€” the vision already uses "keycard" as the output metaphor; keyrack is where keycards hang

2. **structured access** â€” a rack has slots (indexed, organized); a ring has keys bunched together

3. **hospitality vibe** â€” hotel front desk = service, security, controlled access

4. **distinctive** â€” no linux precedent to compete with (GNOME Keyring), fresh name

5. **the verbs work**:
   - "rack up" = organize, prepare
   - "grab from the rack" = quick access
   - "slot in" = add to the system

---

## potential concerns

| concern | assessment |
|---------|------------|
| less familiar than keyring | true, but vision's keycard metaphor already established |
| no linux precedent | pro: no collision; con: no prior art |
| "rack" could imply physical hardware | context makes it clear (cli tool, not server rack) |

---

## recommendation

**keyrack** completes the vision's hospitality metaphor:

- vaults store raw credentials (like a hotel safe)
- mechanism adapters mint keycards (like front desk staff)
- keyrack holds keycards ready for agents (like the front desk rack)
- agents grab keycards, never touch raw credentials (like hotel guests)

the name reinforces the mental model: this is a front desk that handles credentials with care and hands out only what agents need.

---

## citations

1. [hotel front office equipment](https://hmhub.in/1st-sem-front-office-notes/front-office-equipments/) â€” "a key rack is positioned underneath the counter of the front desk"
