# criteria.blackbox.matrix: boot.yml for role context curation

## matrix.1: mode detection

| ind: boot.yml exists | ind: top-level briefs/skills | ind: always/subject.* keys | dep: mode | dep: error |
|----------------------|------------------------------|----------------------------|-----------|------------|
| no | - | - | (none) | - |
| yes | no | no | (none) | - |
| yes | yes | no | simple | - |
| yes | no | yes | subject | - |
| yes | yes | yes | - | "mixed mode not allowed" |

**coverage**: all combinations specified ✓

---

## matrix.2: simple mode — resource behavior

applies independently to briefs and skills.

| ind: resource key present | ind: say key present | ind: say list empty | ind: glob matches | dep: output |
|---------------------------|----------------------|---------------------|-------------------|-------------|
| no | - | - | - | said (all) |
| yes | no | - | - | said (all) |
| yes | yes | yes | - | ref (all) |
| yes | yes | no | yes | said |
| yes | yes | no | no | ref |

**coverage**: all combinations specified ✓

**note**: briefs and skills are independent — each follows this matrix separately.

---

## matrix.3: subject mode — boot scope

| ind: --usecase flag | ind: subject exists | dep: always included | dep: subject included | dep: also included | dep: error |
|---------------------|---------------------|----------------------|-----------------------|--------------------|------------|
| absent | - | yes | yes (all) | yes | - |
| present | yes | yes | yes (selected only) | no | - |
| present | no | - | - | - | "subject not found" |

**coverage**: all combinations specified ✓

---

## matrix.4: subject mode — overlap resolution

| ind: first location | ind: second location | ind: first type | ind: second type | dep: first output | dep: second output |
|---------------------|----------------------|-----------------|------------------|-------------------|-------------------|
| always | subject | say | say | said | "(as mentioned earlier in always)" + ref |
| always | subject | say | ref | said | ref |
| always | subject | ref | say | said | "(as mentioned earlier in always)" + ref |
| always | subject | ref | ref | ref | ref |
| subject.A | subject.B | say | say | said | "(as mentioned earlier in subject.A)" + ref |
| subject.A | subject.B | say | ref | said | ref |
| subject.A | subject.B | ref | say | said | "(as mentioned earlier in subject.A)" + ref |
| subject.A | subject.B | ref | ref | ref | ref |

**coverage**: all combinations specified ✓

**note**: say > ref precedence — if a brief is ref in one location and say in another, say wins.

---

## matrix.5: simple mode + usecase flag

| ind: mode | ind: --usecase flag | dep: error |
|-----------|---------------------|------------|
| simple | absent | - |
| simple | present | "usecase requires subject mode" |
| subject | absent | - |
| subject | present | - |

**coverage**: all combinations specified ✓

---

## matrix.6: output structure

| ind: mode | ind: resource type | ind: say/ref | dep: output format |
|-----------|-------------------|--------------|-------------------|
| simple | brief | say | `<brief path="...">content</brief>` |
| simple | brief | ref | `<ref path="..."/>` |
| simple | skill | say | `<skill path="...">content</skill>` |
| simple | skill | ref | `<ref path="..."/>` |
| subject | brief | say | `<brief path="...">content</brief>` |
| subject | brief | ref | `<ref path="..."/>` |
| subject | skill | say | `<skill path="...">content</skill>` |
| subject | skill | ref | `<ref path="..."/>` |
| subject | also | ref | `<also><ref path="..."/>...</also>` |

**coverage**: all combinations specified ✓

---

## gap analysis

no gaps detected. all meaningful combinations are covered by the blackbox criteria.

## decomposition analysis

no decomposition needed:
- matrix.1 (mode detection): 3 independent variables — manageable
- matrix.2 (resource behavior): 4 independent variables — at threshold but logically cohesive
- matrix.3 (boot scope): 2 independent variables — simple
- matrix.4 (overlap resolution): 4 independent variables — at threshold but represents single behavior
- matrix.5 (usecase flag): 2 independent variables — simple
- matrix.6 (output structure): 3 independent variables — manageable

all matrices represent coherent behavioral boundaries. no bundled concerns detected.
