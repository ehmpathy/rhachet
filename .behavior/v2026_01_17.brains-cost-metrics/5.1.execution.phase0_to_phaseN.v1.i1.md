# execution: brain cost metrics

this document tracks the execution of the brain cost metrics implementation roadmap.

---

## phase 1: domain objects

### 1.1 create BrainSpec domain object
- [ ] **status**: in-progress
- **notes**: create `src/domain.objects/BrainSpec.ts` with BrainSpec literal that extends DomainLiteral

### 1.2 create BrainOutputMetrics domain object
- [ ] **status**: queued

### 1.3 create BrainOutput domain object
- [ ] **status**: queued

### 1.4 export domain objects
- [ ] **status**: queued

### 1.5 create calcBrainOutputCost operation
- [ ] **status**: queued

### 1.6 add calcBrainOutputCost unit tests
- [ ] **status**: queued

### 1.7 create genSampleBrainSpec test helper
- [ ] **status**: queued

### 1.8 install iso-price dependency
- [ ] **status**: queued
- **notes**: `iso-price` package does not exist on npm; will create local IsoPrice type

---

## phase 2: supplier contract

### 2.1 update BrainAtom interface
- [ ] **status**: queued

### 2.2 update BrainRepl interface
- [ ] **status**: queued

### 2.3 update genMockedBrainAtom test helper
- [ ] **status**: queued

### 2.4 update genMockedBrainRepl test helper
- [ ] **status**: queued

---

## phase 3: context layer

### 3.1 update askViaBrainAtom
- [ ] **status**: queued

### 3.2 update askViaBrainRepl and actViaBrainRepl
- [ ] **status**: queued

### 3.3 update genContextBrain
- [ ] **status**: queued

### 3.4 update genContextBrain tests
- [ ] **status**: queued

---

## phase 4: public api

### 4.1 update Actor interface and genActor
- [ ] **status**: queued

### 4.2 update sdk integration tests
- [ ] **status**: queued

### 4.3 add metrics acceptance tests
- [ ] **status**: queued

### 4.4 full regression
- [ ] **status**: queued

---

## notes

- `iso-price` package does not exist on npm as of 2026-01-19
- created local `IsoPrice` type in `src/domain.objects/IsoPrice.ts`
- price arithmetic functions created in `src/domain.operations/brainCost/priceArithmetic.ts`
