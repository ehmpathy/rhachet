# domain terms: final choice (v1.i3)

formalizes the terminology choices for brain-continue

---

## tldr

| perspective | container | unit         | step          |
| ----------- | --------- | ------------ | ------------- |
| navigator   | Weave     | WeaveThread  | WeaveStitch   |
| brain       | —         | BrainEpisode | BrainExchange |

---

## 1. the two perspectives

rhachet separates two orthogonal views of thought work:

| perspective   | who                               | what they track                      |
| ------------- | --------------------------------- | ------------------------------------ |
| **navigator** | rhachet (orchestrator)            | the thought routes woven             |
| **brain**     | supplier (anthropic, openai, etc) | the conversation state they maintain |

each perspective owns its vocabulary. the separation reinforces architectural boundaries.

---

## 2. navigator terms (Weave*)

### chosen terms

| term          | what                                                        | scope                 |
| ------------- | ----------------------------------------------------------- | --------------------- |
| `Weave`       | all thought routes combined                                 | entire orchestration  |
| `WeaveThread` | one thought route with context and history                  | one thought route     |
| `WeaveStitch` | one unit of stitched thought (choice, cycle, route, fanout) | one step in the route |

### rationale

| decision                    | rationale                                                                                            |
| --------------------------- | ---------------------------------------------------------------------------------------------------- |
| `Weave*` prefix             | disambiguation from overloaded "Thread"; explicit navigator ownership; symmetry with `Brain*` prefix |
| `WeaveThread` over `Thread` | "Thread" collides with OS threads, email threads, social threads; prefix makes ownership clear       |
| `WeaveStitch` over `Stitch` | consistency with WeaveThread; signals orchestration scope                                            |

### hierarchy

```
Weave
└── WeaveThread[] (thought routes)
    └── WeaveStitch[] (steps in the route)
```

---

## 3. brain terms (Brain*)

### chosen terms

| term            | what                                    | scope                         |
| --------------- | --------------------------------------- | ----------------------------- |
| `BrainEpisode`  | the supplier's record of a conversation | one continuous context window |
| `BrainExchange` | one request-response pair               | one api call round-trip       |

### rationale

| decision                           | rationale                                                                                                                                 |
| ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| `BrainEpisode` over `BrainSession` | precision over industry alignment; "episode" implies bounded continuity; compaction = new episode with recap; rich tv/healthcare metaphor |
| `BrainExchange` over `BrainTurn`   | explicit bidirectional semantics; "turn" implies one direction; "exchange" captures full round-trip                                       |
| `Brain*` prefix                    | explicit supplier ownership; no ambiguity with navigator concepts                                                                         |

### hierarchy

```
BrainEpisode
└── BrainExchange[] (request-response pairs)
```

---

## 4. the vocabulary separation principle

> **vocabulary reflects perspective. different perspectives, different vocabulary.**

the navigator orchestrates — it speaks in Weaves, WeaveThreads, and WeaveStitches.

the brain converses — it speaks in BrainEpisodes and BrainExchanges.

shared vocabulary would blur the architectural boundary.

---

## 5. design principles applied

| principle                         | application                                         |
| --------------------------------- | --------------------------------------------------- |
| precision over industry alignment | Episode/Exchange over Session/Turn                  |
| disambiguation over brevity       | WeaveThread over Thread                             |
| explicit ownership                | Brain* and Weave* prefixes                          |
| rich metaphor                     | tv series (episodes), textile (weave/thread/stitch) |
| symmetry                          | both perspectives use prefix pattern                |

---

## 6. cardinality

```
Weave (1)
└── WeaveThread[] (1..N thought routes)
    ├── WeaveStitch[] (0..N steps)
    │   └── each stitch may invoke brain or not
    │
    └── spans BrainEpisode[] (0..N episodes)
        └── BrainExchange[] (1..N exchanges per episode)
```

| relationship                 | cardinality |
| ---------------------------- | ----------- |
| Weave : WeaveThread          | 1 : 1..N    |
| WeaveThread : WeaveStitch    | 1 : 0..N    |
| WeaveThread : BrainEpisode   | 1 : 0..N    |
| BrainEpisode : BrainExchange | 1 : 1..N    |
| WeaveStitch : BrainEpisode   | 0..1 : 0..1 |

---

## 7. usage examples

### navigator side

```ts
const weave = new Weave({ threads: [] });
const thread = new WeaveThread({ exid: 'abc', stitches: [] });
const stitch = new WeaveStitch({ type: 'choice', ... });
```

### brain side

```ts
const { episode, output } = await brain.ask({ say: 'what is a cat?' });
await brain.ask({ in: { episode }, say: 'what is a dog?' });

// episode.exchanges = [exchange0, exchange1]
```

### cross-perspective

```ts
// a stitch may invoke a brain episode
const stitch = new WeaveStitch({
  type: 'imagine',
  brainEpisodeRef: { exid: episode.exid },
});
```

---

## 8. summary

| concept            | term            | prefix | perspective |
| ------------------ | --------------- | ------ | ----------- |
| all thought routes | `Weave`         | —      | navigator   |
| one thought route  | `WeaveThread`   | Weave* | navigator   |
| one step in route  | `WeaveStitch`   | Weave* | navigator   |
| one conversation   | `BrainEpisode`  | Brain* | brain       |
| one round-trip     | `BrainExchange` | Brain* | brain       |
