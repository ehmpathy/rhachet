# contrast: navigator terms vs brain terms

how `Thread`/`Stitch` (navigator) relate to `BrainSession`/`BrainTurn` (brain)

---

## 1. the two perspectives

| perspective | who | what they track |
|-------------|-----|-----------------|
| **navigator** | rhachet (orchestrator) | the thought route woven |
| **brain** | supplier (anthropic, openai, etc) | the conversation state they maintain |

these are **orthogonal** views of the same work.

---

## 2. term map

### navigator perspective

| term | what | scope |
|------|------|-------|
| `Weave` | all thought routes combined | entire orchestration |
| `Thread` | one thought route with context and history | one thought route |
| `Stitch` | one unit of stitched thought (choice, cycle, route, fanout) | one step in the route |

### brain perspective

| term | what | scope |
|------|------|-------|
| `BrainSession` | the supplier's record of a conversation | one continuous context window |
| `BrainTurn` | one request-response exchange | one api call |

---

## 3. the key distinction (from wish)

> "a session is part of a thread, but is different"
> - "threads are a history that we keep"
> - "threads can span multiple sessions (could have invoked independent sessions or resumed sessions, or mixed)"
> - "sessions are a history that the brain supplier keeps"

**thread** = what rhachet remembers
**session** = what the brain remembers

---

## 4. cardinality

```
Weave (1)
└── contains Thread[] (1..N thought routes)
    ├── contains Stitch[] (0..N stitches)
    │   └── each stitch may invoke brain or not
    │
    └── spans BrainSession[] (0..N sessions)
        └── each session contains BrainTurn[] (1..N turns)
```

| relationship | cardinality |
|--------------|-------------|
| Weave : Thread | 1 : 1..N |
| Thread : Stitch | 1 : 0..N |
| Thread : BrainSession | 1 : 0..N |
| BrainSession : BrainTurn | 1 : 1..N |
| Stitch : BrainSession | 0..1 : 0..1 (a stitch may or may not invoke a brain) |

---

## 5. examples

### example a: solid route (no brain)

```
Thread
├── Stitch[0]: fetch pr comments (shell)
├── Stitch[1]: parse comments (compute)
└── Stitch[2]: format output (compute)

BrainSessions: [] (none — all deterministic)
```

### example b: single session (continued)

```
Thread
├── Stitch[0]: set reviewer context     → BrainSession[0], Turn[0]
├── Stitch[1]: review chapter 1         → BrainSession[0], Turn[1] (continued)
└── Stitch[2]: review chapter 2         → BrainSession[0], Turn[2] (continued)

BrainSessions: [session0 with 3 turns]
```

### example c: independent sessions (disjoint)

```
Thread
├── Stitch[0]: "what is a cat?"         → BrainSession[0], Turn[0]
├── Stitch[1]: "what is a dog?"         → BrainSession[1], Turn[0] (new session)
└── Stitch[2]: combine into "what is a pet?" → BrainSession[2], Turn[0] (new session)

BrainSessions: [session0, session1, session2] (independent)
```

### example d: mixed (some continued, some independent)

```
Thread
├── Stitch[0]: set reviewer context     → BrainSession[0], Turn[0]
├── Stitch[1]: review chapter 1         → BrainSession[0], Turn[1] (continued)
├── Stitch[2]: fetch external data      → (no brain, shell command)
├── Stitch[3]: summarize findings       → BrainSession[1], Turn[0] (new session)
└── Stitch[4]: ask clarification        → BrainSession[1], Turn[1] (continued)

BrainSessions: [session0 with 2 turns, session1 with 2 turns]
```

---

## 6. analogy: film production

| concept | navigator (director) | brain (actor) |
|---------|---------------------|---------------|
| full work | Weave (the film) | — |
| story line | Thread (one narrative arc) | — |
| one segment | Stitch (one scene shoot) | BrainSession (one take session) |
| one action | — | BrainTurn (one line delivery) |

the director (navigator) orchestrates the film (weave) via story lines (threads) and scene shoots (stitches).
the actor (brain) delivers lines (turns) within take sessions (sessions).

the director may:
- shoot multiple scenes with the same actor in one session (continued)
- shoot scenes with different actors (independent sessions)
- shoot scenes that need no actor (deterministic stitches)

---

## 7. why the distinction matters

### for the navigator (rhachet)

- **weave** is all thought routes combined
- **thread** is one thought route — the source of truth for orchestration state
- **stitches** define the structure of the thought route
- rhachet controls when to continue vs start fresh
- rhachet can mix multiple brains, sessions, and deterministic steps

### for the brain (supplier)

- **session** is the source of truth for conversation context
- **turns** are the atomic units of interaction
- the brain only sees what's in its session
- the brain doesn't know about the broader thread

### for the user (developer)

- think in **threads** when orchestration matters
- think in **sessions** when context window matters
- use continuation when prior turns inform the next
- use independence when disjoint requests are cleaner

---

## 8. summary table

| question | navigator answer | brain answer |
|----------|------------------|--------------|
| "what is all thought routes?" | Weave | — |
| "what is one thought route?" | Thread | — |
| "what is the full history?" | Thread.history | BrainSession.turns |
| "what is one step?" | Stitch | BrainTurn |
| "who owns this?" | rhachet | supplier |
| "where is state stored?" | rhachet's memory | supplier's api |
| "can it span multiple brains?" | yes (thread can) | no (session is per-brain) |
| "can it be resumed?" | yes (thread context) | yes (session continuation) |
