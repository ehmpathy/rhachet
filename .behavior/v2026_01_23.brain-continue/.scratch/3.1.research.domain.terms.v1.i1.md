# domain terms research: brain-continue

research into terminology for multi-turn brain interactions with session continuation

---

## 1. the core concept

we need terms for:
1. **the brain supplier's record of a conversation** — what the brain "remembers"
2. **a reference to that record** — how we point to it for continuation
3. **the act of continuation** — how we signal "resume this"

this is distinct from `Thread` (navigator's perspective on thought events).

---

## 2. research: how llm apis name this

### 2.1 anthropic claude

**stateless by design.** the messages api has no native session state.

> "the messages api is stateless, which means that you always send the full conversational history to the api" [1]

> "if you want multi-turn chat, you must resend the whole conversation history each time" [1]

**claude agent sdk introduces sessions:**

> "sessions allow you to continue conversations across multiple interactions while maintaining full context" [2]

> "when you start a new query, the sdk automatically creates a session and returns a session id in the initial system message. you can capture this id to resume the session later" [2]

> "use the resume option with a session id to continue a previous conversation" [2]

**terms used:** `session`, `session_id`, `resume`

### 2.2 openai

**assistants api (deprecated march 2025):**

> "threads and messages represent a conversation session between an assistant and a user" [3]

> "a thread is essentially the record of the conversation session between the assistant and the user. it's similar to the messages array/list in a typical chat completions api call" [3]

**responses api (current):**

> "another way to manage conversation state is to share context across generated responses with the `previous_response_id` parameter. this parameter lets you chain responses and create a threaded conversation" [4]

> "a new `client.conversations.create()` method returns a new container id for conversation messages" [5]

**terms used:** `thread`, `conversation`, `previous_response_id`, `conversation_state`

### 2.3 langchain / general llm memory

> "large language models (llms) are fundamentally stateless. they don't inherently 'remember' past interactions. each time you send a message, the model processes it as a brand-new event, devoid of history" [6]

> "short-term memory (chat history) refers to the recent conversation history or session state, giving continuity to a dialog" [6]

> "a thread is an isolated session that stores several different states and has a unique id to identify it. if a user returns tomorrow, you just give langgraph the same thread id, and it picks up right where you left off" [6]

**terms used:** `memory`, `state`, `chat_history`, `thread`, `checkpoint`

---

## 3. research: parallel domains

### 3.1 healthcare — encounter vs episode

> "an encounter is a single event in which care is given. individual office visits, er visits, chemo appointments, and c-sections are all encounters. an episode is a grouping of more than one encounter" [7]

> "the primary difference between the episodeofcare and the encounter is that the encounter records the details of an activity directly relating to the patient, while the episodeofcare is the container that can link a series of encounters together" [8]

**terms:** `encounter` (single event), `episode` (grouped encounters), `visit`

**insight:** encounter = one exchange, episode = related exchanges over time. similar to "turn" vs "session" vs "thread".

### 3.2 telephony — call legs and segments

> "a call leg is a logical connection between two router/gateways or between a router/gateway and an ip telephony device" [9]

> "a call is segmented into call legs with a dial peer associated to each call leg" [9]

> "to complete a call successfully four call legs must be present: call leg 1: the incoming pots call leg from the originating phone, call leg 2: the outgoing voip call leg from the first router, call leg 3: the incoming voip call leg on the second router, and call leg 4: the outgoing pots call leg to the destination phone" [9]

> "sip stands for session initiation protocol. in a volte call sip protocol is used to create, modify and terminate sessions" [9]

**terms:** `call`, `session`, `leg`, `segment`

**insight:** a "session" is established, then subdivided into "legs" or "segments". each leg is a directed exchange.

### 3.3 culinary — courses

> "the word 'course' is derived from the french word cours (run), which came into english in the 14th century" [10]

> "a full-course meal is a structured dining experience consisting of multiple courses served in a specific sequence. unlike casual dining, where all food is served at once, a full-course meal is carefully designed to enhance flavour progression" [10]

**terms:** `course`, `service`, `progression`

**insight:** a "course" is one stage in a larger "service". progression implies sequence and purpose.

### 3.4 computer science — continuations

> "in computer science, a continuation is an abstract representation of the control state of a computer program. a continuation implements (reifies) the program control state, i.e., the continuation is a data structure that represents the computational process at a given point in the process's execution" [11]

> "a continuation is a representation of the control flow of your program at any point in time, essentially the stack. in abstract terms, it represents 'the rest of your program'" [11]

> "coroutines are computer program components that allow execution to be suspended and resumed, generalizing subroutines for cooperative multitasking" [12]

**terms:** `continuation`, `coroutine`, `suspend`, `resume`

**insight:** "continuation" captures the state needed to resume. "resume" is the action.

### 3.5 linguistics — turn-exchange

> "turn-taking is a type of organization in conversation and discourse where participants speak one at a time in alternating turns" [13]

> "each turn is made up of at least one turn construction unit (tcu), which is a complete linguistic unit" [13]

> "an adjacency pair is composed of two utterances by two speakers, one after the other. the speaking of the first utterance (the first-pair part, or the first turn) provokes a responding utterance (the second-pair part, or the second turn)" [14]

**terms:** `turn`, `exchange`, `adjacency pair`, `utterance`

**insight:** a "turn" is one party's contribution. an "exchange" is a turn pair.

### 3.6 legal — continuance vs adjournment

> "in american procedural law, a continuance is the postponement of a hearing, trial, or other scheduled court proceeding" [15]

> "a continuance is a scheduled delay ordered by the court; an adjournment is often a short postponement or recess during a hearing" [15]

> "adjournment sine die is a legal term that originates from latin, meaning 'without assigning a day for a further meeting or hearing.' in practical terms, it refers to the indefinite suspension" [15]

**terms:** `continuance`, `adjournment`, `recess`, `resumption`

**insight:** "continuance" explicitly means "to be continued later". strong semantic fit.

### 3.7 theatre — acts and scenes

> "an act is a major division of a theatrical work... consisting of one or more scenes" [16]

> "a scene normally represents actions happening in one place at one time and is marked off from the next scene by a curtain, a blackout, or a brief emptying of the stage" [16]

**terms:** `act`, `scene`, `intermission`

**insight:** an "act" groups related scenes. an "intermission" is a pause between acts.

### 3.8 production — jobs and runs

> "a manufacturing order is a set of documents conveying the authority to manufacture parts or products in specified quantities. manufacturing orders are also called batch cards, job orders, production orders, run orders, shop orders, or work orders" [17]

> "a production run is a specific quantity of units manufactured in one continuous process as part of a larger production order" [17]

**terms:** `job`, `order`, `run`, `batch`

**insight:** a "run" is a continuous execution. a "job" or "order" may span multiple runs.

---

## 4. current rhachet domain

from the codebase:

| term | definition | perspective |
|------|------------|-------------|
| `Thread` | "a declaration of a thought thread" with context, stitches, history | navigator |
| `BrainAtom` | "an llm inference endpoint capable of creative language imagination" | brain supplier |
| `BrainRepl` | "a brain.atom behind a repl (read-execute-print-loop)" | brain supplier |
| `Stitch` | a unit of stitched thought (choice, cycle, route, fanout) | navigator |

**the gap:** no term for the brain's perspective on a conversation's state.

per the wish:
> "brainsession = brains perspective on thought events"
> "thread = navigators perspective on thought events"

---

## 5. term candidate analysis

### 5.1 for "the brain supplier's record"

| candidate | pros | cons |
|-----------|------|------|
| `BrainSession` | matches sip/telephony; claude sdk uses "session"; clear supplier-side ownership | slightly generic; "session" overloaded in web contexts |
| `BrainConversation` | matches openai's new api; intuitive | longer; less technical precision |
| `BrainDialogue` | linguistic precision; clear two-party | less common in tech apis |
| `BrainExchange` | captures back-and-forth | singular implies one turn |
| `BrainEncounter` | healthcare parallel; single interaction scope | may imply shorter duration than intended |
| `BrainEpisode` | healthcare parallel; groups related interactions | may be confused with "episode of a series" |
| `BrainContinuation` | cs precision; captures resumability | more abstract; may confuse non-cs folks |

**recommendation:** `BrainSession`
- aligns with sip (session initiation protocol) semantics
- matches claude sdk terminology
- clear distinction from `Thread` (navigator-side)
- intuitive: "i want to continue this session"

### 5.2 for "the reference to that record"

| candidate | pros | cons |
|-----------|------|------|
| `{ exid }` | external id pattern; idempotency key; user-controlled | requires suppliers to support |
| `{ id }` | primary key; supplier-controlled | may vary per supplier; less portable |
| `{ sessionRef }` | explicit reference type | verbose |

per the wish:
> "brainsession's unique key = { exid }"

**recommendation:** `RefByUnique<typeof BrainSession>` with `unique = ['exid']`
- allows user to specify idempotency key
- fallback to `RefByPrimary` if supplier only supports read-only ids

### 5.3 for "the act of continuation"

| candidate | pros | cons |
|-----------|------|------|
| `continue` | legal precedent; explicit intent | reserved keyword in many languages |
| `resume` | cs precedent (coroutines); clear action | slightly less common in api design |
| `extend` | implies built on prior | may imply length, not context |
| `chain` | openai uses for responses | may imply linear only |
| `in` | minimal; "in this session" | very terse; may be unclear |

**recommendation:** `{ in: { session } }` pattern
- minimal api surface
- reads naturally: `.ask({ in: { session }, say: '...' })`
- parallels other "in context" patterns

alternative: `{ resume: sessionRef }` for explicit continuation semantics

---

## 6. proposed domain objects

### 6.1 BrainSession (entity)

```
BrainSession
├── exid: string          // external id (unique key if supplier supports)
├── id?: string           // primary key (supplier-assigned)
├── repo: string          // brain supplier repo (e.g., "anthropic")
├── slug: string          // brain slug (e.g., "claude-code")
├── status: 'active' | 'closed' | 'expired'
└── createdAt: string
```

- `unique = ['exid']` if supplier supports idempotency
- `primary = ['id']` as fallback

### 6.2 BrainTurn (event)

captures one request-response pair within a session.

```
BrainTurn
├── sessionRef: Ref<typeof BrainSession>
├── role: 'user' | 'assistant'
├── content: string
├── occurredAt: string
└── metrics?: BrainOutputMetrics
```

linguistic parallel: turn-exchange in conversation analysis.

### 6.3 relationships

```
Thread (navigator perspective)
├── may span 0..N BrainSessions
├── owns stitches and context
└── controls orchestration

BrainSession (brain perspective)
├── belongs to 1 BrainAtom or BrainRepl
├── contains 1..N BrainTurns
└── maintains supplier-side state
```

---

## 7. api shape options

### option a: input pattern `{ in: { session } }`

```ts
const { session, output } = await brain.ask({
  say: 'what is a cat?',
});

await brain.ask({
  in: { session },
  say: 'what is a dog?',
});
```

**pros:** minimal, reads naturally
**cons:** `in` is a reserved word in some contexts

### option b: input pattern `{ resume: sessionRef }`

```ts
const { session, output } = await brain.ask({
  say: 'what is a cat?',
});

await brain.ask({
  resume: { exid: session.exid },
  say: 'what is a dog?',
});
```

**pros:** explicit action verb, cs precedent
**cons:** slightly more verbose

### option c: output pattern with session entity

```ts
const result = await brain.ask({ say: 'what is a cat?' });
// result.session: BrainSession
// result.output: TOutput

await brain.ask({
  session: result.session,
  say: 'what is a dog?',
});
```

**pros:** explicit entity in/out
**cons:** may feel redundant

---

## 8. citations

[1] [messages api - claude docs](https://platform.claude.com/docs/en/build-with-claude/working-with-messages)

[2] [session management - claude docs](https://platform.claude.com/docs/en/agent-sdk/sessions)

[3] [assistants api deep dive - openai](https://platform.openai.com/docs/assistants/deep-dive)

[4] [conversation state - openai](https://platform.openai.com/docs/guides/conversation-state)

[5] [new responses api feature - openai community](https://community.openai.com/t/new-responses-api-feature-conversation-state-api-thread-like-replacement/1353886)

[6] [the ultimate guide to llm memory - medium](https://medium.com/@sonitanishk2003/the-ultimate-guide-to-llm-memory-from-context-windows-to-advanced-agent-memory-systems-3ec106d2a345)

[7] [episode of care - healthcareitskills](https://healthcareitskills.com/episode-of-care/)

[8] [difference between encounter, episode and appointment - fhir community](http://community.fhir.org/t/difference-between-encounter-episode-and-appointment-different-ids/3831)

[9] [dial peers and call legs - cisco](https://www.cisco.com/c/en/us/support/docs/voice/call-routing-dial-plans/12164-dialpeer-call-leg.html)

[10] [full course meals explained - webstaurantstore](https://www.webstaurantstore.com/blog/2578/full-course-meal.html)

[11] [continuation - wikipedia](https://en.wikipedia.org/wiki/Continuation)

[12] [coroutine - wikipedia](https://en.wikipedia.org/wiki/Coroutine)

[13] [turn-exchange - wikipedia](https://en.wikipedia.org/wiki/Turn-taking)

[14] [adjacency pairs - wikipedia](https://en.wikipedia.org/wiki/Adjacency_pairs)

[15] [continuance - wikipedia](https://en.wikipedia.org/wiki/Continuance)

[16] [act (drama) - wikipedia](https://en.wikipedia.org/wiki/Act_(drama))

[17] [glossary of production terms - microsoft](https://learn.microsoft.com/en-us/dynamics-gp/distribution/glossary-manufacturing)

---

## 9. recommendations summary

| concept | recommended term | rationale |
|---------|------------------|-----------|
| brain's record of conversation | `BrainSession` | matches sip, claude sdk; clear distinction from Thread |
| one request-response pair | `BrainTurn` | linguistic precedent; parallels turn-exchange |
| reference for continuation | `RefByUnique<typeof BrainSession>` with `exid` | idempotency support; user-controllable |
| continuation action | `{ in: { session } }` or `{ resume: sessionRef }` | minimal api; reads naturally |

### term relationships

```
Thread (navigator)
  └── orchestrates across

BrainSession (brain supplier)
  └── contains

BrainTurn (event)
  └── records one exchange
```
