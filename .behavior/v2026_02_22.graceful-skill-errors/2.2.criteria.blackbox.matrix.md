# blackbox coverage matrix: graceful skill errors

## matrix: exit code behavior

| ind: exit code | ind: stderr present | dep: status subtree | dep: stderr shown | dep: JSON block | dep: process exit |
|----------------|---------------------|---------------------|-------------------|-----------------|-------------------|
| 0              | yes                 | (none)              | yes               | no              | 0                 |
| 0              | no                  | (none)              | n/a               | no              | 0                 |
| 2              | yes                 | `âœ‹ blocked by constraints` | yes        | no              | 2                 |
| 2              | no                  | `âœ‹ blocked by constraints` | n/a        | no              | 2                 |
| 1              | yes                 | `ðŸ’¥ failed with an error`  | yes        | no              | 1                 |
| 1              | no                  | `ðŸ’¥ failed with an error`  | n/a        | no              | 1                 |
| 3-255          | yes                 | `ðŸ’¥ failed with an error`  | yes        | no              | original          |
| 3-255          | no                  | `ðŸ’¥ failed with an error`  | n/a        | no              | original          |

## observations

### dimension count: 2 independent variables
- exit code (0, 2, 1, 3-255)
- stderr present (yes, no)

this is well within the manageable range â€” no decomposition needed.

### gaps: none detected
all combinations are covered:
- âœ… exit 0 with/without stderr
- âœ… exit 2 with/without stderr
- âœ… exit 1 with/without stderr
- âœ… exit 3-255 with/without stderr

### invariants (true for all rows)
- JSON block is **never** shown (always "no")
- skill identifier line is **always** emitted
- stdout streams through (when present)

### exit code groupings
| exit code | semantic | status indicator |
|-----------|----------|------------------|
| 0         | success  | (none)           |
| 2         | graceful failure (blocked) | `âœ‹ blocked by constraints` |
| 1, 3-255  | unexpected error (failed)  | `ðŸ’¥ failed with an error`  |

## summary

the behavior is determined by a single dimension: **exit code**.

stderr presence only affects whether output appears â€” the status subtree logic is exit-code-driven.

no decomposition opportunities â€” the scope is narrow and well-bounded.
