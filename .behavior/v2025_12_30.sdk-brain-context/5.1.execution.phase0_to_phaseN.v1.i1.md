# execution: sdk brain context

## phase.1: domain objects

### [x] 1.1 create BrainAtom
- **file**: `src/domain.objects/BrainAtom.ts`
- **status**: complete
- **notes**: DomainEntity with unique=['repo', 'slug'], imagine method receives briefs directly

### [x] 1.2 create BrainRepl
- **file**: `src/domain.objects/BrainRepl.ts`
- **status**: complete
- **notes**: DomainEntity with unique=['repo', 'slug'], imagine method receives briefs directly

### [x] 1.3 create ContextBrain
- **file**: `src/domain.objects/ContextBrain.ts`
- **status**: complete
- **notes**: DomainLiteral with brain.atom.imagine and brain.repl.imagine interfaces

### [x] 1.4 export domain objects from index
- **file**: `src/domain.objects/index.ts`
- **status**: complete

### [x] 1.5 rename RhachetBrain* to Brain* for consistency
- **status**: complete
- **notes**: RhachetBrainAtom → BrainAtom, RhachetBrainRepl → BrainRepl, ContextRhachetBrain → ContextBrain, genContextRhachetBrain → genContextBrain


---


## phase.2: domain operations

### [x] 2.1 create castBriefsToPrompt
- **file**: `src/domain.operations/role/briefs/castBriefsToPrompt.ts`
- **status**: complete
- **notes**: async function, uses Artifact.get() to retrieve content

### [~] 2.2 refactor bootRoleResources to use castBriefsToPrompt
- **file**: `src/domain.operations/invoke/bootRoleResources.ts`
- **status**: skipped
- **notes**: bootRoleResources outputs raw files to stdout for CLI boot, not for LLM prompt generation. different use case than castBriefsToPrompt which handles Artifact arrays.

### [x] 2.3 create findBrainAtomByRef
- **file**: `src/domain.operations/context/findBrainAtomByRef.ts`
- **status**: complete
- **notes**: throws BadRequestError with helpful messages

### [x] 2.4 create findBrainReplByRef
- **file**: `src/domain.operations/context/findBrainReplByRef.ts`
- **status**: complete
- **notes**: throws BadRequestError with helpful messages

### [x] 2.5 create genContextBrain
- **file**: `src/domain.operations/context/genContextBrain.ts`
- **status**: complete
- **notes**: factory function, validates no duplicates, briefs passed through to plugins


---


## phase.3: sdk exports

### [x] 3.1 update sdk.ts with brain exports
- **file**: `src/contract/sdk.ts`
- **status**: complete
- **notes**: exports BrainAtom, BrainRepl, ContextBrain, genContextBrain, castBriefsToPrompt


---


## phase.4: plugin examples

### [x] 4.1 create rhachet-brain-anthropic plugin
- **directory**: `src/_topublish/rhachet-brain-anthropic/`
- **status**: complete
- **files created**:
  - `readme.md`
  - `src/atoms/brainAtomClaudeOpus.ts`
  - `src/repls/brainReplClaudeCode.ts`
  - `src/index.ts`
- **notes**: exports getBrainAtomsByAnthropic() and getBrainReplsByAnthropic()

### [x] 4.2 create rhachet-brain-openai plugin
- **directory**: `src/_topublish/rhachet-brain-openai/`
- **status**: complete
- **files created**:
  - `readme.md`
  - `src/atoms/brainAtomGpt4o.ts`
  - `src/repls/brainReplCodex.ts`
  - `src/index.ts`
- **notes**: exports getBrainAtomsByOpenAI() and getBrainReplsByOpenAI()


---


## phase.5: integration tests

### [x] 5.1 create full flow integration test
- **file**: `src/domain.operations/context/genContextBrain.integration.test.ts`
- **status**: complete
- **tests**:
  - [case1] combined atoms and repls from both plugins
  - [case2] plugin getter functions return correct types
  - [case3] role.briefs are passed through to plugins


---


## phase.6: final validation

### [x] 6.1 run full test suite
- **status**: complete
- **results**:
  - unit tests: 41 passed
  - integration tests: 18 passed
  - type checks: pass
  - lint: pass
  - build: pass

### [x] 6.2 verify sdk exports work end-to-end
- **status**: complete
- **notes**: build compiles successfully, integration tests verify plugin patterns work
