# execution log: preserve `file:.` dependencies in upgrade

## phase 0: prerequisites

### [ ] 0.1 verify current test suite passes

**started**: 2026-01-18

**commands**:
```sh
npm run test:types
npm run test:unit
npm run test:integration
npm run test:acceptance
```

**status**: in progress...

---

## phase 1: domain operation â€” `getFileDotDependencies`

### [ ] 1.1 create `getFileDotDependencies.ts`

### [ ] 1.2 create unit tests for `getFileDotDependencies`

---

## phase 2: integrate into `execUpgrade`

### [ ] 2.1 modify `buildInstallList` to accept exclusions

### [ ] 2.2 integrate `getFileDotDependencies` into `execUpgrade`

### [ ] 2.3 update `execUpgrade.test.ts` with file:. exclusion cases

---

## phase 3: acceptance test fixture

### [ ] 3.1 create fixture `with-file-dot-dep`

### [ ] 3.2 add fixture to `TestRepoFixture` type

---

## phase 4: acceptance tests

### [ ] 4.1 add acceptance test case for file:. preservation

---

## phase 5: full verification

### [ ] 5.1 run complete test suite

### [ ] 5.2 manual verification in real `rhachet-roles-*` repo

---

## phase 6: cleanup

### [ ] 6.1 verify no dead code or unused imports

### [ ] 6.2 commit changes
